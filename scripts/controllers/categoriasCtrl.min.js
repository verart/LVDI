app.controller("categoriasCtrl",["$scope","$modal","$filter","$log","AlertService","gastosService","AuthService","$location",function(a,e,t,o,n,r,i,c){a.order="-nombre",a.categoria={id:"",nombre:""},a.alerts=[],r.categorias().then(function(e){a.data=e.data.DATA},function(){i.logout(),c.path("/login")}),a.openCategoria=function(o){a.selectedCategoria=""!=o?t("getById")(a.data,o):"";var i=e.open({templateUrl:dir_root+"/templates/categorias/addedit.html",windowClass:"wndUsuarios",controller:"ModalCategoriasInstanceCtrl",backdrop:"static",keyboard:!0,resolve:{categoria:function(){return a.selectedCategoria}}});angular.element("#nombre").focus(),i.result.then(function(e){""==a.selectedCategoria?r.addCategoria(e).then(function(e){a.data.push(e.data.DATA),n.add("success","La categoría fue creada",1e3)},function(a){n.add("danger",a.data.MSG,5e3)}):r.addCategoria(e).then(function(){n.add("success","La categoría fue actualizada",1e3)},function(a){n.add("danger",a.data.MSG)})},function(){})},a.nuevo=function(){a.openCategoria("")},a.eliminarCategoria=function(o){var i={msj:"¿Está seguro que desea eliminar esta categoría?",accept:"Si",cancel:"No"},c=e.open({templateUrl:dir_root+"/templates/confirm.html",windowClass:"wndConfirm",controller:modalConfirmCtrl,resolve:{txt:function(){return i}}});c.result.then(function(){r.deleteCategoria(o).then(function(){var e=t("getIndexById")(a.data,o);a.data.splice(e,1)},function(a){n.add("danger",a.data.MSG)})},function(){})}}]),app.controller("ModalCategoriasInstanceCtrl",["$scope","$modalInstance","categoria",function(a,e,t){if(""!=t){var o=angular.copy(t);a.categoria=t}else{a.categoria={nombre:""};var o=a.categoria}a.ok=function(){e.close({categoria:a.categoria})},a.cancel=function(){a.back2original(),e.dismiss()},a.back2original=function(){a.categoria.nombre=o.nombre}}]);